/* =============== Fonts =============== */
@import url("https://fonts.cdnfonts.com/css/thegoodmonolith");
@import url("https://fonts.cdnfonts.com/css/pp-neue-montreal");

/* =============== Root & Resets =============== */
:root{
  --spacing-base:1rem; --spacing-md:1.5rem; --spacing-lg:2rem;
  --color-text:#fff; --color-bg:#000; --color-text-dim:0.6;
  --transition-medium:.3s ease; --font-size-base:14px;
  --border-radius:8px;

  /* Item vignette */
  --vignette-size:0px;

  /* Page vignettes */
  --page-vignette-size:0px;
  --page-vignette-strong-size:0px;
  --page-vignette-extreme-size:0px;
  --page-vignette-color:rgba(0,0,0,.9);
  --page-vignette-strong-color:rgba(0,0,0,.95);
  --page-vignette-extreme-color:rgba(0,0,0,1);
}

*{margin:0;padding:0;box-sizing:border-box;user-select:none}
html,body{height:100%}
body{
  font-family:"PP Neue Montreal",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--color-bg); color:var(--color-text); overflow:hidden; position:relative;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Animated noise (HTTPS) */
body::before{
  content:""; position:fixed; top:-50%; left:-50%; width:200%; height:200%;
  background:transparent url("https://assets.iceable.com/img/noise-transparent.png") repeat 0 0;
  background-size:300px 300px; animation:noise-animation .3s steps(5) infinite;
  opacity:.9; will-change:transform; z-index:100; pointer-events:none;
}
@keyframes noise-animation{
  0%{transform:translate(0,0)}10%{transform:translate(-2%,-3%)}20%{transform:translate(-4%,2%)}
  30%{transform:translate(2%,-4%)}40%{transform:translate(-2%,5%)}50%{transform:translate(-4%,2%)}
  60%{transform:translate(3%,0)}70%{transform:translate(0,3%)}80%{transform:translate(-3%,0)}
  90%{transform:translate(2%,2%)}100%{transform:translate(1%,0)}
}
@media (prefers-reduced-motion:reduce){ body::before{animation:none} }

p{display:block;color:#fff;font-size:14px;font-weight:600;letter-spacing:-.01rem}
ul{list-style:none}
h3{font-size:14px;margin-bottom:var(--spacing-base);font-weight:600}

/* Links */
a{
  position:relative; cursor:pointer; color:var(--color-text); display:inline-block;
  text-decoration:none; font-size:var(--font-size-base); font-weight:700; z-index:1;
  transition:color var(--transition-medium);
}
a::after{
  content:""; position:absolute; inset:0 auto 0 0; width:0; height:100%;
  background:var(--color-text); z-index:-1; transition:width .3s cubic-bezier(.34,1.56,.64,1);
}
a:hover::after{width:100%}
a:hover{color:#000; mix-blend-mode:difference}

.key-hint{
  display:inline-flex; align-items:center; justify-content:center; padding:0 5px;
  border:1px solid var(--color-text); border-radius:3px; font-size:12px; margin:0 3px;
  min-width:20px; height:20px;
}

/* Header & Footer */
.header,.footer{
  position:absolute; left:0; width:100vw; padding:1.5rem; z-index:10000;
  display:grid; grid-template-columns:repeat(12,1fr); column-gap:var(--spacing-base);
  transition:opacity var(--transition-medium), transform var(--transition-medium);
}
.header{top:0} .footer{bottom:0}

.nav-section{grid-column:1 / span 3}
.values-section{grid-column:5 / span 2}
.location-section{grid-column:7 / span 2}
.contact-section{grid-column:9 / span 2}
.social-section{grid-column:11 / span 2; text-align:right}

.coordinates-section{grid-column:1 / span 3; font-family:"TheGoodMonolith",monospace}
.footer p{font-family:"TheGoodMonolith",monospace}
.links-section{grid-column:5 / span 4; text-align:center; display:flex; justify-content:center; align-items:center; gap:var(--spacing-base)}
.info-section{grid-column:9 / span 4; text-align:right}

/* Hide when collapsed via JS (H key) */
body.panel-collapsed .header,
body.panel-collapsed .footer{opacity:0; pointer-events:none; transform:translateY(-6px)}

/* Logo */
.logo-container{margin-bottom:var(--spacing-md); display:block; width:3rem; height:1.5rem; position:relative}
.logo-circles{position:relative; width:100%; height:100%}
.circle{position:absolute; border-radius:50%; width:1.4rem; height:1.4rem; top:50%; background:var(--color-text); transition:transform var(--transition-medium)}
.circle-1{left:0; transform:translate(0,-50%)}
.circle-2{left:.8rem; transform:translate(0,-50%); mix-blend-mode:exclusion}
.logo-container:hover .circle-1{transform:translate(-.5rem,-50%)}
.logo-container:hover .circle-2{transform:translate(.5rem,-50%)}

/* Canvas */
.container{position:relative; width:100vw; height:100vh; overflow:hidden; cursor:grab}
.canvas{position:absolute; will-change:transform}

/* Items */
.item{position:absolute; overflow:hidden; background:#000; cursor:pointer; border-radius:var(--border-radius)}
.item-image-container{position:relative; width:100%; height:100%; overflow:hidden}
.item-image-container::after{content:""; position:absolute; inset:0; pointer-events:none; box-shadow:inset 0 0 var(--vignette-size) rgba(0,0,0,.5); z-index:1}
.item img{width:100%; height:100%; object-fit:cover; pointer-events:none; transition:transform .3s ease}
.item:hover img{transform:scale(var(--hover-scale,1.05))}

.item-caption{position:absolute; left:0; bottom:0; width:100%; padding:10px; z-index:2}
.item-name{font-family:"PP Neue Montreal",sans-serif; color:#fff; font-size:12px; font-weight:500; text-transform:uppercase; letter-spacing:-.03em; margin-bottom:2px; position:relative; overflow:hidden; height:16px}
.item-name .word{display:inline-block; will-change:transform}
.item-number{font-family:"TheGoodMonolith",monospace; color:#888; font-size:10px; font-weight:400; position:relative; overflow:hidden; height:14px}
.item-number .char{display:inline-block; will-change:transform}

/* Expanded item */
.expanded-item{position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10000; background:#000; overflow:hidden; cursor:pointer; border-radius:var(--border-radius)}
.expanded-item img{width:100%; height:100%; object-fit:cover; pointer-events:none}

/* Overlay */
.overlay{position:fixed; inset:0; background:#000; pointer-events:none; opacity:0; z-index:9999; transition:opacity var(--transition-medium)}
.overlay.active{pointer-events:auto}

/* Project title */
.project-title{position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; z-index:10002}
.project-title p{position:relative; height:42px; color:#fff; clip-path:polygon(0 0,100% 0,100% 100%,0 100%); overflow:hidden}
.project-title p .word{display:inline-block; font-family:"PP Neue Montreal",sans-serif; font-size:36px; letter-spacing:-.03em; text-transform:uppercase; will-change:transform}

/* Clones */
.caption-clone{position:fixed; z-index:10002}

/* Page vignette layers */
.page-vignette-container{position:fixed; inset:0; pointer-events:none; z-index:9998}
.page-vignette, .page-vignette-strong, .page-vignette-extreme{position:absolute; inset:0}
.page-vignette{box-shadow:inset 0 0 var(--page-vignette-size) var(--page-vignette-color)}
.page-vignette-strong{box-shadow:inset 0 0 var(--page-vignette-strong-size) var(--page-vignette-strong-color)}
.page-vignette-extreme{box-shadow:inset 0 0 var(--page-vignette-extreme-size) var(--page-vignette-extreme-color)}

/* Tweakpane */
.tp-dfwv{z-index:10000 !important}
.tp-rotv{opacity:.5 !important}
.tp-rotv.tp-rotv-expanded{opacity:1 !important}
.tp-rotv.tp-rotv-collapsed{opacity:.7 !important}

/* Responsive */
@media (max-width:1024px){
  .nav-section{grid-column:1 / span 4}
  .values-section{grid-column:5 / span 4}
  .location-section{grid-column:9 / span 4}
  .contact-section{grid-column:1 / span 6; margin-top:var(--spacing-base)}
  .social-section{grid-column:7 / span 6; text-align:right; margin-top:var(--spacing-base)}
  .coordinates-section{grid-column:1 / span 6}
  .links-section{grid-column:7 / span 6}
  .info-section{grid-column:1 / span 12; text-align:center; margin-top:var(--spacing-base)}
}
@media (max-width:680px){
  .header,.footer{grid-template-columns:repeat(6,1fr); row-gap:var(--spacing-base)}
  .nav-section{grid-column:1 / span 3}
  .values-section{grid-column:4 / span 3}
  .location-section{grid-column:1 / span 3}
  .contact-section{grid-column:4 / span 3}
  .social-section{grid-column:1 / span 6; text-align:left}
  .coordinates-section{grid-column:1 / span 6}
  .links-section{grid-column:1 / span 6}
  .info-section{grid-column:1 / span 6}
}

/* A11y utility */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
